// Generated by CoffeeScript 1.3.0
(function() {
  var docReady;

  google.load("visualization", "1", {
    packages: ["corechart"]
  });

  docReady = function() {
    var drawChart;
    drawChart = function(url, stat, title) {
      $('#stats').append("<div id='" + stat + "' class='stat-chart'>");
      return $.getJSON('/stats/' + url, function(d) {
        var chart, data, options;
        data = new google.visualization.DataTable();
        data.addColumn('datetime', 'Run At');
        data.addColumn('number', title);
        data.addRows($.map(d, function(build) {
          return [[new Date(build.runAt), build[stat]]];
        }));
        options = {
          colors: ['#A30E0E'],
          title: title,
          titleTextStyle: {
            color: '#666'
          },
          hAxis: {
            textStyle: {
              color: '#666'
            },
            baselineColor: '#666'
          },
          vAxis: {
            textStyle: {
              color: '#666'
            },
            baselineColor: '#666'
          },
          animation: {
            duration: 2
          },
          backgroundColor: 'none',
          legend: {
            position: 'none'
          }
        };
        chart = new google.visualization.LineChart(document.getElementById(stat));
        return chart.draw(data, options);
      });
    };
    drawChart('build-time', 'buildTime', 'Build Time');
    return drawChart('number-of-tests', 'numberOfTests', 'Number of Tests');
  };

  google.setOnLoadCallback(docReady, true);

}).call(this);
